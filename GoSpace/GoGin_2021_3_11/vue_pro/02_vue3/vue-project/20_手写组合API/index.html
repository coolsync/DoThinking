<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./index.js"></script>
</head>

<body>
    <script>
        /* 测试自定义shallowReactive */
        const userProxy1 = shallowReactive({
            name: 'bob',
            car: {
                color: ['red', 'black']
            }
        })

        // userProxy1.name += '++'  // get, set method called
        // userProxy1.car.color += '++' // get method called, set failed

        // /* 测试自定义reactive */
        const userProxy2 = reactive({
            name: 'bob',
            car: {
                color: ['red', 'black']
            }
        })

        // userProxy2.name += '++' // get, set method called
        // userProxy2.car.color[0] += '++'    // get, set method called
        // console.log(userProxy2.car.color)    // get method, read target data


        // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

        /* 测试自定义shallowReadonly */
        const userProxy3 = shallowReadonly({
            name: 'bob',
            cars: ['benci', 'baoma'],
        })

        // read: can
        // console.log(userProxy3.name)
        // console.log(userProxy3.cars[0])

        // modify: shallow, can not update; deep, can update
        // userProxy3.name += '++'
        // userProxy3.cars[0] += '++'   
        // console.log(userProxy3.car)

        // del: shallow 只读的, 不能删除; deep can
        // delete userProxy3.name 
        // delete userProxy3.cars[0]
        // console.log(userProxy3.cars)

        /* 测试自定义readonly */
        const userProxy4 = readonly({
            name: 'bob',
            cars: ['benci', 'baoma'],
        })

        // read: can
        // console.log(userProxy4.name)
        // console.log(userProxy4.cars[0])

        // modify: shallow, can not update; deep, can update
        // userProxy4.name += '++'
        // userProxy4.cars[0] += '++'   
        // console.log(userProxy4.car)

        // del: shallow 只读的, 不能删除; deep can
        // delete userProxy4.name 
        // delete userProxy4.cars[0]    // first read, secode delete
        // console.log(userProxy4.cars)


        // +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

        /* 测试自定义shallowRef */
        const ref1 = shallowRef({
            name: 'bob',
            car: {
                color: 'red',
            }
        })
        // console.log(ref1.value.name)
        // ref1.value.name += '++'  // ok
        ref1.value.car.color += '++' // ok
        console.log(ref1.value.car.color)

        /* 测试自定义ref */
        const ref2 = ref({
            name: 'bob',
            car: {
                color: 'red',
            }
        })
        // ref2.value.name += '++'  // ok
        // ref2.value.car.color += '++' // ok
        // console.log("ref2: ",ref2.value.car.color)
    </script>
</body>

</html>